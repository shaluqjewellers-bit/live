<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SHALUQ JEWELLERS – Live Gold & Silver</title>
<link rel="icon" href="logo.png">

<style>
/* ===== FONT ===== */
@font-face{font-family:"ClarityCity";src:url("ClarityCity-Regular.ttf") format("truetype");font-weight:400}
@font-face{font-family:"ClarityCity";src:url("ClarityCity-SemiBold.ttf") format("truetype");font-weight:600}
@font-face{font-family:"ClarityCity";src:url("ClarityCity-Bold.ttf") format("truetype");font-weight:800}

/* ===== GLOBAL RESET ===== */
html, body{width:100%;height:100%;margin:0;padding:0;}
body{ min-height:100vh; }

:root{
  --bg:#05070c;
  --gold:#ffd36a;
  --gold2:#ffb300;
  --border:#1b2a4a;
  --open:#26d68a;
  --closed:#ff5c5c;
}

body{
  background:radial-gradient(1200px 600px at 50% 0%,#0b1633 0%,var(--bg) 55%,#02030a 100%);
  color:#fff;
  font-family:"ClarityCity",Arial,sans-serif;
  overflow-x:hidden;
  overflow-y:hidden;
  position:relative;
}

/* ===== SUBTLE GOLD AMBIENT GLOW ===== */
body::before{
  content:"";
  position:fixed;
  inset:-20%;
  pointer-events:none;
  z-index:0;
  opacity:.28;
  filter: blur(35px);
  background:
    radial-gradient(900px 420px at 20% 15%, rgba(255,179,0,.22), transparent 62%),
    radial-gradient(1000px 520px at 85% 25%, rgba(255,211,106,.16), transparent 70%),
    radial-gradient(850px 480px at 55% 85%, rgba(255,179,0,.12), transparent 70%);
  animation:ambientGlow 34s ease-in-out infinite;
}
@keyframes ambientGlow{
  0%   { transform:translate3d(-1.5%, -1.5%, 0) scale(1.02); opacity:.22; }
  50%  { transform:translate3d( 1.5%,  1.0%, 0) scale(1.06); opacity:.32; }
  100% { transform:translate3d(-1.5%, -1.5%, 0) scale(1.02); opacity:.22; }
}

/* Put all content above the ambient glow */
.hero, .divider, .rates, .ticker { position:relative; z-index:1; }

/* ===== HEADER ===== */
.hero{
  padding:22px 14px 16px;
  border-bottom:1px solid rgba(255,179,0,.15);
}
.hero-inner{
  display:flex;
  justify-content:center;
  align-items:center;
  gap:22px;
}
.logo-wrap{
  width:110px;height:110px;
  border-radius:26px;
  display:grid;place-items:center;
  background:#070b14;
  border:1px solid rgba(255,211,106,.25);
  box-shadow:0 0 25px rgba(255,179,0,.35), inset 0 0 18px rgba(255,255,255,.08);
  position:relative;overflow:hidden;
}
.logo-wrap::after{
  content:"";
  position:absolute;inset:-50%;
  background:linear-gradient(120deg,transparent 35%,rgba(255,255,255,.35) 50%,transparent 65%);
  animation:shine 6s infinite;
}
/* ✅ logo always fully visible */
.logo-wrap img{
  width:82px;
  max-width:78%;
  height:auto;
  display:block;
}

.brand{text-align:center}
.brand-name{
  font-size:58px;
  font-weight:800;
  letter-spacing:7px;
  color:transparent;
  background:linear-gradient(90deg,#fff4cc,#ffd36a,#ffffff,#ffb300,#fff4cc);
  background-size:300% 100%;
  background-clip:text;
  -webkit-background-clip:text;
  text-shadow:0 0 18px rgba(255,179,0,.45), 0 0 35px rgba(255,179,0,.25);
  animation:goldFlow 10s linear infinite;
  position:relative;
  display:inline-block;
  overflow:hidden;
}

/* ===== MICRO SHINE ===== */
.brand-name::after{
  content:"";
  position:absolute;
  top:-25%;
  left:-70%;
  width:55%;
  height:160%;
  pointer-events:none;
  transform:skewX(-18deg);
  background:linear-gradient(
    90deg,
    rgba(255,255,255,0) 0%,
    rgba(255,255,255,.22) 35%,
    rgba(255,255,255,.55) 50%,
    rgba(255,255,255,.22) 65%,
    rgba(255,255,255,0) 100%
  );
  mix-blend-mode:screen;
  opacity:.65;
  animation:brandSweep 25s ease-in-out infinite;
}
@keyframes brandSweep{
  0%   { left:-75%; opacity:0; }
  8%   { opacity:.65; }
  18%  { left:120%; opacity:0; }
  100% { left:120%; opacity:0; }
}

.brand-sub{
  margin-top:10px;
  font-size:18px;
  color:#cfd8ff;
}

/* ===== MARKET BAR ===== */
.marketbar{display:flex;justify-content:center;margin-top:12px}
.marketpill{
  display:flex;align-items:center;gap:16px;
  padding:16px 28px;border-radius:999px;
  background:rgba(0,0,0,.45);
  border:1px solid rgba(255,179,0,.35);
  backdrop-filter: blur(12px);
  font-weight:800;
  font-size:22px;
}
.dot{
  width:16px;height:16px;border-radius:50%;
  background:var(--open);
  box-shadow:0 0 14px var(--open);
  animation:blink 1.4s infinite;
}
.sep{opacity:.45}

/* ===== DIVIDER ===== */
.divider{
  height:2px;
  width:min(1280px, 92vw);
  margin:10px auto 0;
  border-radius:999px;
  background:linear-gradient(90deg,
    rgba(255,179,0,0) 0%,
    rgba(255,211,106,.35) 15%,
    rgba(255,179,0,.75) 50%,
    rgba(255,211,106,.35) 85%,
    rgba(255,179,0,0) 100%
  );
  box-shadow:0 0 22px rgba(255,179,0,.14);
  opacity:.9;
}

/* ===== GRID ===== */
.rates{
  max-width:1700px;
  margin:20px auto 90px;  /* ✅ space for ticker */
  padding:14px;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}
.card{
  background:linear-gradient(180deg,#0f1830,#060a14);
  border:1px solid var(--border);
  border-radius:18px;
  overflow:hidden;
  min-height:680px;
}
.card-title{
  text-align:center;
  padding:14px;
  font-size:20px;
  font-weight:800;
  border-bottom:1px solid var(--border);
}

/* ===== TV WIDGET ALIGNMENT (DESKTOP) ===== */
.tv-box{position:relative;height:calc(100% - 52px)}
.tv-inner{position:absolute;inset:0}
.tv-inner iframe{
  position:absolute!important;
  left:50%!important;
  top:50%!important;
  transform-origin:center center !important;
  transform:translate(calc(-50% + 80px), calc(-50% + 40px)) scale(1.10)!important;
  width:100%!important;
  height:100%!important;
  border:0;
}

/* ===== CLOSED OVERLAY ===== */
.closed-overlay{
  position:absolute;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  text-align:center;
  font-size:22px;
  font-weight:800;
  letter-spacing:.5px;
  color:rgba(255,255,255,.92);
  background:linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.72));
  border-top:1px solid rgba(255,179,0,.18);
}
.market-closed .tv-inner{ display:none; }
.market-closed .closed-overlay{ display:flex; }

/* ===== TICKER ===== */
.ticker{
  position:fixed;bottom:0;left:0;right:0;
  height:64px;background:#000c;
  border-top:1px solid rgba(255,179,0,.2);
  overflow:hidden;backdrop-filter: blur(10px);
  z-index:5;
}
.marquee{display:flex;width:100%;overflow:hidden}
.marquee-group{
  display:flex;gap:50px;white-space:nowrap;
  animation:scroll 120s linear infinite;
}
.item{font-size:18px;font-weight:700;display:flex;gap:12px;align-items:center}

/* ✅ Clickable news styling */
.item a.news-link{
  color:#fff;
  text-decoration:none;
  border-bottom:1px solid rgba(255,255,255,.22);
  padding-bottom:1px;
  transition:opacity .15s ease, border-color .15s ease;
}
.item a.news-link:hover{
  opacity:.9;
  border-bottom-color: rgba(255,211,106,.75);
}

/* ✅ Timestamp styling */
.news-time{
  font-size:14px;
  font-weight:800;
  color:#cfd8ff;
  opacity:.9;
  letter-spacing:.3px;
}

.badge{
  padding:6px 12px;border-radius:16px;
  background:rgba(255,179,0,.15);
  color:var(--gold);
  border:1px solid rgba(255,179,0,.3);
}

/* ===== FULLSCREEN BUTTON (BASE) ===== */
.kiosk-btn{
  position:fixed;
  top:14px;
  right:14px;
  z-index:9999;
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 14px;
  border-radius:999px;
  border:1px solid rgba(255,179,0,.38);
  background:rgba(0,0,0,.45);
  backdrop-filter: blur(10px);
  color:#fff;
  font-family:"ClarityCity",Arial,sans-serif;
  font-weight:900;
  letter-spacing:.3px;
  cursor:pointer;
  user-select:none;
  box-shadow:0 0 20px rgba(255,179,0,.12);
}
.kiosk-btn:active{ transform:translateY(1px); }
.kiosk-ic{
  width:12px;height:12px;border-radius:50%;
  background:rgba(255,211,106,.9);
  box-shadow:0 0 12px rgba(255,179,0,.55);
}
.kiosk-hint{
  font-size:12px;
  font-weight:800;
  opacity:.7;
}

/* Optional: when in kiosk mode, reduce extra margins for more screen space */
body.kiosk .rates{ margin-top:12px; }

/* ✅ Hide FULL SCREEN on desktop/TV (so it never disturbs brand) */
@media (min-width: 769px){
  .kiosk-btn{ display:none !important; }
}

/* ===== ANIMATIONS ===== */
@keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}
@keyframes blink{0%,100%{opacity:.4}50%{opacity:1}}
@keyframes shine{0%{transform:translateX(-120%)}100%{transform:translateX(120%)}}
@keyframes goldFlow{0%{background-position:0%}100%{background-position:300%}}

/* ===== RESPONSIVE ===== */
@media(max-width:1100px){
  .rates{grid-template-columns:1fr}
  .brand-name{font-size:44px}
}

/* ===== MOBILE OPTIMIZATION (NO OVERLAP GUARANTEED) ===== */
@media (max-width: 768px){
  body{ overflow-y:auto; }

  /* ✅ reserve a top strip for the FULL SCREEN button so it never overlaps logo/brand */
  .hero{
    padding:58px 10px 12px;  /* top reserved space */
    position:relative;
  }

  /* ✅ put button in reserved strip (top-left) */
  .kiosk-btn{
    display:flex !important;     /* override desktop hide */
    position:absolute;
    top:10px;
    left:10px;
    right:auto;
    padding:8px 10px;
    gap:8px;
    border-radius:999px;
  }

  /* ✅ smaller text so it never eats space */
  #kioskLabel{ font-size:12px; letter-spacing:.2px; }
  .kiosk-ic{ width:10px; height:10px; }
  .kiosk-hint{ display:none; }

  .hero-inner{
    gap:12px;
    justify-content:center;
    flex-wrap:nowrap;
    padding:0 6px;
  }
  .logo-wrap{ width:68px; height:68px; border-radius:18px; }
  .logo-wrap img{ width:48px; max-width:80%; }

  .brand{ max-width:78vw; }
  .brand-name{
    font-size:30px;
    letter-spacing:3px;
    line-height:1.05;
    white-space:normal;
    word-break:break-word;
  }
  .brand-sub{ font-size:14px; margin-top:6px; }

  .marketpill{
    font-size:14px;
    padding:10px 14px;
    gap:10px;
    max-width:95vw;
    flex-wrap:wrap;
    justify-content:center;
    text-align:center;
  }
  .dot{ width:12px; height:12px; }

  .rates{
    grid-template-columns:1fr;
    margin:12px auto 86px; /* ✅ space for ticker on mobile */
    padding:10px;
    gap:12px;
  }

  .card{ min-height:auto; }
  .tv-box{ height:360px; }

  /* ✅ FIX: show "Day's Range" (less shrink than before, still fits) */
  .tv-inner iframe{
    transform:translate(-50%,-50%) scale(0.92)!important;
  }

  .ticker{ height:54px; }
  .item{ font-size:14px; }
  .badge{ padding:5px 10px; border-radius:14px; }
  .news-time{ font-size:12px; }
}
</style>
</head>

<body>

<!-- ✅ FULLSCREEN BUTTON (MOBILE ONLY) -->
<button class="kiosk-btn" id="kioskBtn" type="button" aria-label="Toggle fullscreen">
  <span class="kiosk-ic" aria-hidden="true"></span>
  <span id="kioskLabel">FULL SCREEN</span>
  <span class="kiosk-hint" id="kioskHint">Fullscreen</span>
</button>

<!-- HEADER -->
<div class="hero">
  <div class="hero-inner">
    <div class="logo-wrap"><img src="logo.png" alt="Logo"></div>
    <div class="brand">
      <div class="brand-name">SHALUQ JEWELLERS</div>
      <div class="brand-sub">Live Gold & Silver Prices</div>
    </div>
  </div>

  <!-- Market Countdown Pill -->
  <div class="marketbar">
    <div class="marketpill">
      <span class="dot" id="statusDot"></span>
      <span id="marketTop">Market</span>
      <span class="sep">•</span>
      <span id="marketETA">--</span>
      <span class="sep">•</span>
      <span id="clock">--:-- UAE • --:-- USA • --:-- LON</span>
    </div>
  </div>
</div>

<!-- Divider -->
<div class="divider"></div>

<!-- RATES -->
<div class="rates">
  <div class="card">
    <div class="card-title">GOLD (XAUUSD)</div>
    <div class="tv-box">
      <div class="closed-overlay">Market Closed</div>
      <div class="tv-inner"><div id="gold"></div></div>
    </div>
  </div>

  <div class="card">
    <div class="card-title">SILVER (XAGUSD)</div>
    <div class="tv-box">
      <div class="closed-overlay">Market Closed</div>
      <div class="tv-inner"><div id="silver"></div></div>
    </div>
  </div>
</div>

<!-- TICKER -->
<div class="ticker">
  <div class="marquee">
    <div class="marquee-group" id="g1">
      <div class="item"><span class="badge">NEWS</span> Loading Gold Headlines...</div>

      <div class="item"><span class="badge">DUBAI</span> Office M02, Saeed Mohammed Building, Deira Gold Souk Dubai</div>
      <div class="item"><span class="badge">FOR DUBAI CALL</span> +971 54 786 9940</div>
      <div class="item"><span class="badge">VISIT</span> www.shaluqjewellers.com</div>
      <div class="item"><span class="badge">FUJAIRAH</span> (Retail Store) Hamad Bin Abdulla Rd, Merashid, Opposite ADCB Bank Fujairah UAE</div>
      <div class="item"><span class="badge">FOR FUJAIRAH CALL</span> +971 92 439 539</div>
      <div class="item"><span class="badge">SHALUQ JEWELLERS</span> Where Luxury Meets Affection</div>

      <!-- SPACER FOR CLEAN SEPARATION -->
      <div class="item" aria-hidden="true" style="width:80px;"></div>
    </div>

    <div class="marquee-group" id="g2"></div>
  </div>
</div>

<script>
/* ===== TradingView Symbol Info ===== */
function addTV(symbol,id){
  const s=document.createElement("script");
  s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-info.js";
  s.async=true;
  s.innerHTML=JSON.stringify({symbol:symbol,colorTheme:"dark",isTransparent:true,locale:"en"});
  document.getElementById(id).appendChild(s);
}
addTV("OANDA:XAUUSD","gold");
addTV("OANDA:XAGUSD","silver");

/* ===== Dubai time helper (UAE = UTC+4) ===== */
function getDubaiDate(){
  const now = new Date();
  const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
  return new Date(utc + (4 * 60 * 60000));
}

/* ===== Clock (Dubai + USA(New York) + London) ===== */
function tickClock(){
  const now = new Date();

  // UAE (Dubai)
  const d = getDubaiDate();
  const hh = String(d.getHours()).padStart(2,"0");
  const mm = String(d.getMinutes()).padStart(2,"0");

  // USA (New York) - auto handles DST
  const ny = new Date(now.toLocaleString("en-US", { timeZone: "America/New_York" }));
  const nyhh = String(ny.getHours()).padStart(2,"0");
  const nymm = String(ny.getMinutes()).padStart(2,"0");

  // London - auto handles DST
  const lon = new Date(now.toLocaleString("en-GB", { timeZone: "Europe/London" }));
  const lonhh = String(lon.getHours()).padStart(2,"0");
  const lonmm = String(lon.getMinutes()).padStart(2,"0");

  document.getElementById("clock").textContent =
    `${hh}:${mm} UAE • ${nyhh}:${nymm} USA • ${lonhh}:${lonmm} LON`;
}
tickClock();
setInterval(tickClock, 10000);

/* ===== MARKET HOURS (Dubai time)
   Open: 03:00
   Close: 02:00 (next day)
   Daily gap: 02:00–03:00 CLOSED
   Weekend closure: Saturday 02:00 → Sunday 03:00 CLOSED
*/
let marketTickTimer = null;

function updateDubaiMarket(){
  const d = getDubaiDate();
  const day = d.getDay(); // 0=Sun, 6=Sat
  const h = d.getHours();

  const top = document.getElementById("marketTop");
  const eta = document.getElementById("marketETA");
  const dot = document.getElementById("statusDot");

  const dailyGapClosed = (h === 2);

  const weekendClosed =
    (day === 6 && (h >= 2)) ||  // Saturday from 02:00 onward
    (day === 0 && (h < 3));     // Sunday until 03:00

  const isOpen = !(dailyGapClosed || weekendClosed);

  function getNextClose(nowDubai){
    const close = new Date(nowDubai);
    close.setMilliseconds(0);
    if (nowDubai.getHours() < 2){
      close.setHours(2, 0, 0, 0);
    } else {
      close.setDate(close.getDate() + 1);
      close.setHours(2, 0, 0, 0);
    }
    return close;
  }

  function getNextOpen(nowDubai){
    const open = new Date(nowDubai);
    open.setMilliseconds(0);

    if (weekendClosed){
      if (day === 6){
        open.setDate(open.getDate() + 1);
        open.setHours(3, 0, 0, 0);
      } else {
        open.setHours(3, 0, 0, 0);
      }
    } else {
      open.setHours(3, 0, 0, 0);
    }
    return open;
  }

  if (marketTickTimer) clearInterval(marketTickTimer);

  if (isOpen){
    const closeAt = getNextClose(d);

    top.textContent = "Market Open";
    dot.style.background = "var(--open)";
    dot.style.boxShadow = "0 0 12px var(--open)";
    document.body.classList.remove("market-closed");

    function tick(){
      const nowDubai = getDubaiDate();
      let diff = Math.max(0, Math.floor((closeAt.getTime() - nowDubai.getTime()) / 1000));
      const hrs = Math.floor(diff / 3600);
      diff %= 3600;
      const mins = Math.floor(diff / 60);
      const secs = diff % 60;
      eta.textContent = `Closes in ${hrs}h ${mins}m ${String(secs).padStart(2,"0")}s`;
    }
    tick();
    marketTickTimer = setInterval(tick, 1000);

  } else {
    const openAt = getNextOpen(d);

    top.textContent = "Market Closed";
    dot.style.background = "var(--closed)";
    dot.style.boxShadow = "0 0 12px var(--closed)";
    document.body.classList.add("market-closed");

    function tick(){
      const nowDubai = getDubaiDate();
      let diff = Math.max(0, Math.floor((openAt.getTime() - nowDubai.getTime()) / 1000));

      const days = Math.floor(diff / 86400);
      diff %= 86400;
      const hrs = Math.floor(diff / 3600);
      diff %= 3600;
      const mins = Math.floor(diff / 60);
      const secs = diff % 60;

      eta.textContent = days > 0
        ? `Opens in ${days}d ${hrs}h ${mins}m ${String(secs).padStart(2,"0")}s`
        : `Opens in ${hrs}h ${mins}m ${String(secs).padStart(2,"0")}s`;
    }
    tick();
    marketTickTimer = setInterval(tick, 1000);
  }
}
updateDubaiMarket();
setInterval(updateDubaiMarket, 30000);

/* ===== Ticker duplicate rebuild (for seamless loop) ===== */
function rebuildTicker(){
  document.getElementById("g2").innerHTML = document.getElementById("g1").innerHTML;
}

/* ===== Utilities: safe text, time formatting, relative time ===== */
function stripHtml(s){
  return String(s || "").replace(/<[^>]*>/g,"").trim();
}
function formatDubaiTime(dateObj){
  const d = new Date(dateObj);
  const utc = d.getTime() + (d.getTimezoneOffset() * 60000);
  const dubai = new Date(utc + (4 * 60 * 60000));
  const hh = String(dubai.getHours()).padStart(2,"0");
  const mm = String(dubai.getMinutes()).padStart(2,"0");
  return `${hh}:${mm} UAE`;
}
function relTimeFromNow(dateObj){
  const now = new Date();
  const then = new Date(dateObj);
  const diff = Math.max(0, Math.round((now.getTime() - then.getTime())/1000));
  const m = Math.floor(diff/60);
  const h = Math.floor(m/60);
  const d = Math.floor(h/24);
  if (d >= 1) return `${d}d ago`;
  if (h >= 1) return `${h}h ago`;
  if (m >= 1) return `${m}m ago`;
  return `just now`;
}

/* ===== Load GOLD Headlines into same ticker (CLICKABLE + TIMESTAMPS) ===== */
async function loadGoldHeadlines(){
  const g1 = document.getElementById("g1");

  try{
    const rssUrl = "https://www.tradingview.com/rss/news/?category=commodities";
    const api = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(rssUrl);

    const res = await fetch(api, { cache: "no-store" });
    const data = await res.json();

    const oldNews = g1.querySelectorAll("[data-news='1']");
    oldNews.forEach(n => n.remove());

    const first = g1.querySelector(".item");
    if(first && first.textContent.includes("Loading Gold Headlines")) first.remove();

    const items = (data.items || []).slice(0, 6);

    if(items.length === 0){
      g1.insertAdjacentHTML("afterbegin",
        `<div class="item" data-news="1"><span class="badge">NEWS</span> No headlines right now</div>`
      );
    } else {
      const html = items.map(x => {
        const title = stripHtml(x.title);
        const link = x.link || "#";
        const pub = x.pubDate ? new Date(x.pubDate) : null;
        const timeLabel = pub && !isNaN(pub.getTime()) ? `${relTimeFromNow(pub)} • ${formatDubaiTime(pub)}` : "Latest";

        return `
          <div class="item" data-news="1">
            <span class="badge">NEWS</span>
            <a class="news-link" href="${link}" target="_blank" rel="noopener noreferrer">${title}</a>
            <span class="news-time">${timeLabel}</span>
          </div>
        `;
      }).join("");
      g1.insertAdjacentHTML("afterbegin", html);
    }

    rebuildTicker();
  } catch(e){
    rebuildTicker();
  }
}

/* ===== FULLSCREEN MODE (MOBILE BUTTON ONLY) ===== */
const kioskBtn = document.getElementById("kioskBtn");
const kioskLabel = document.getElementById("kioskLabel");
const kioskHint  = document.getElementById("kioskHint");

function isFullscreen(){
  return !!(document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement);
}

async function enterFullscreen(){
  const el = document.documentElement;
  if (el.requestFullscreen) return el.requestFullscreen();
  if (el.webkitRequestFullscreen) return el.webkitRequestFullscreen();
  if (el.msRequestFullscreen) return el.msRequestFullscreen();
  throw new Error("Fullscreen not supported");
}
async function exitFullscreen(){
  if (document.exitFullscreen) return document.exitFullscreen();
  if (document.webkitExitFullscreen) return document.webkitExitFullscreen();
  if (document.msExitFullscreen) return document.msFullscreenElement ? document.msExitFullscreen() : null;
}

async function toggleKiosk(){
  try{
    if (!isFullscreen()){
      await enterFullscreen();
      document.body.classList.add("kiosk");
    } else {
      await exitFullscreen();
      document.body.classList.remove("kiosk");
    }
    updateKioskUI();
  } catch(err){
    kioskHint.textContent = "Blocked";
    setTimeout(() => kioskHint.textContent = isFullscreen() ? "Exit" : "Fullscreen", 1500);
  }
}

function updateKioskUI(){
  if (isFullscreen()){
    kioskLabel.textContent = "EXIT";
  } else {
    kioskLabel.textContent = "FULL SCREEN";
  }
}

kioskBtn.addEventListener("click", toggleKiosk);

["fullscreenchange","webkitfullscreenchange","msfullscreenchange"].forEach(ev=>{
  document.addEventListener(ev, ()=>{
    if (!isFullscreen()) document.body.classList.remove("kiosk");
    updateKioskUI();
  });
});
updateKioskUI();

/* ===== Run ticker duplication + news ===== */
rebuildTicker();
loadGoldHeadlines();
setInterval(loadGoldHeadlines, 10 * 60 * 1000);
</script>

</body>
</html>
