<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SHALUQ JEWELLERS – Live Gold & Silver</title>
  <link rel="icon" href="logo.png" />

  <!-- Heading font (luxury serif) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&display=swap" rel="stylesheet">

  <style>
    /* ===== Local brand font (already in your repo) ===== */
    @font-face{font-family:"ClarityCity";src:url("ClarityCity-Regular.ttf") format("truetype");font-weight:400;font-style:normal}
    @font-face{font-family:"ClarityCity";src:url("ClarityCity-SemiBold.ttf") format("truetype");font-weight:600;font-style:normal}
    @font-face{font-family:"ClarityCity";src:url("ClarityCity-Bold.ttf") format("truetype");font-weight:700;font-style:normal}

    :root{
      --bg0:#050506;
      --bg1:#070708;
      --text:#F2F2F2;
      --muted:#B9B9B9;
      --muted2:#8A8A8A;

      --gold1:#D4AF37;
      --gold2:#F6E27A;

      --card: rgba(13,13,16,.62);
      --line: rgba(255,255,255,.08);
      --shadow: 0 18px 55px rgba(0,0,0,.55);
      --shadow2: 0 24px 70px rgba(0,0,0,.65);
      --r: 18px;

      /* Used by your existing JS */
      --open: rgba(246,226,122,.95);
      --closed: rgba(255,93,93,.95);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: "ClarityCity", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(1200px 700px at 20% -10%, rgba(212,175,55,.14), transparent 60%),
        radial-gradient(900px 600px at 80% 10%, rgba(246,226,122,.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1) 40%, var(--bg0));
      overflow-x:hidden;
    }
    body::before{
      content:"";
      position: fixed; inset:0;
      pointer-events:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.75' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.14'/%3E%3C/svg%3E");
      opacity:.055;
      mix-blend-mode: overlay;
    }

    a{ color:inherit; text-decoration:none; }
    .wrap{
      max-width: 1120px;
      margin: 0 auto;
      padding: 16px 16px 70px;
      position: relative;
    }

    /* ===== Top bar ===== */
    .topbar{
      display:flex;
      justify-content:flex-end;
      padding: 10px 0 6px;
    }
    .btn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,.05);
      border: 1px solid rgba(255,255,255,.08);
      color: var(--text);
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transition: transform .35s cubic-bezier(.2,.8,.2,1), box-shadow .35s cubic-bezier(.2,.8,.2,1), background .25s ease;
    }
    .btn:hover{ transform: translateY(-2px); box-shadow: 0 14px 40px rgba(0,0,0,.45); }
    .btn:active{ transform: translateY(0) scale(.99); }
    .btn .dot{
      width:8px;height:8px;border-radius:999px;
      background: linear-gradient(135deg, var(--gold1), var(--gold2));
      box-shadow: 0 0 16px rgba(212,175,55,.25);
    }
    .btn small{
      color: var(--muted);
      font-size: 11px;
      letter-spacing:.22em;
      text-transform:uppercase;
      display:block;
      line-height:1.05;
    }
    .btn span.txt{
      font-size: 13px;
      letter-spacing:.10em;
      text-transform:none;
      color:#eaeaea;
    }

    /* ===== Header ===== */
    header{
      margin-top: 6px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
      padding: 16px 0 18px;
      border-bottom: 1px solid rgba(255,255,255,.07);
    }
    .brand{
      display:flex;
      align-items:center;
      gap: 14px;
      min-width: 260px;
    }
    .logoBox{
      width: 46px; height: 46px;
      border-radius: 14px;
      background: radial-gradient(circle at 30% 30%, rgba(246,226,122,.35), rgba(212,175,55,.12) 40%, rgba(255,255,255,.04) 72%);
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 50px rgba(0,0,0,.55);
      display:grid; place-items:center;
      overflow:hidden;
    }
    .logoBox img{ width:100%; height:100%; object-fit:cover; display:block; }

    .titles h1{
      margin:0;
      font-family: "Cinzel", serif;
      font-size: 20px;
      font-weight: 600;
      letter-spacing: .18em;
      text-transform: uppercase;
      line-height: 1.1;
    }
    .titles p{
      margin:6px 0 0;
      color: var(--muted);
      font-size: 12px;
      letter-spacing:.20em;
      text-transform: uppercase;
    }

    /* ===== Market pill ===== */
    .marketbar{
      display:flex;
      justify-content:flex-end;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.07);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      color: var(--text);
    }
    .pill .sep{ opacity:.65; }
    .pill .label{
      color: var(--muted);
      font-size: 11px;
      letter-spacing: .22em;
      text-transform: uppercase;
      white-space:nowrap;
    }
    .pill .val{
      font-variant-numeric: tabular-nums;
      letter-spacing: .06em;
      color: #e9e9e9;
      font-size: 12.5px;
      white-space:nowrap;
    }
    .dotStatus{
      width:10px;height:10px;border-radius:999px;
      background: rgba(255,255,255,.14);
      box-shadow: 0 0 18px rgba(255,255,255,.08);
      flex: 0 0 auto;
    }

    /* existing JS expects #statusDot to be a dot */
    #statusDot{ display:inline-block; }

    /* ===== Divider ===== */
    .divider{
      height: 1px;
      background: rgba(255,255,255,.07);
      margin: 16px 0 14px;
    }

    /* ===== Cards ===== */
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 14px;
      margin-top: 8px;
    }
    @media (max-width: 900px){
      header{ flex-direction: column; align-items:flex-start; }
      .marketbar{ justify-content:flex-start; }
      .grid{ grid-template-columns: 1fr; }
    }

    .card{
      position: relative;
      border-radius: var(--r);
      background: var(--card);
      border: 1px solid rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      overflow:hidden;
      transition: transform .35s cubic-bezier(.2,.8,.2,1), box-shadow .35s cubic-bezier(.2,.8,.2,1);
    }
    .card:hover{ transform: translateY(-4px); box-shadow: var(--shadow2); }

    .card::after{
      content:"";
      position:absolute; inset:0;
      border-radius: var(--r);
      padding: 1px;
      background: linear-gradient(135deg, rgba(212,175,55,.55), rgba(255,255,255,.06), rgba(246,226,122,.35));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;
      pointer-events:none;
      opacity:.85;
    }

    .cardInner{
      padding: 18px;
      position: relative;
      z-index: 1;
    }

    .cardHead{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 10px;
    }
    .cardTitle{
      font-family: "Cinzel", serif;
      letter-spacing:.18em;
      text-transform: uppercase;
      font-weight: 600;
      font-size: 14px;
      line-height:1.2;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.04);
      border: 1px solid rgba(255,255,255,.08);
      color: var(--muted);
      font-size: 12px;
      letter-spacing:.08em;
      white-space:nowrap;
    }
    .badge b{ color: var(--text); font-weight: 600; letter-spacing:.10em; }

    /* ===== TradingView widget container ===== */
    .tv-box{
      position: relative;
      border-radius: 16px;
      overflow:hidden;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.06);
      min-height: 140px;
    }
    .tv-inner{ padding: 10px 8px; }

    /* Show overlay only when market-closed (your JS toggles body.market-closed) */
    .closed-overlay{
      position:absolute;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      color:#eaeaea;
      font-family:"Cinzel", serif;
      letter-spacing:.18em;
      text-transform:uppercase;
      z-index: 3;
    }
    body.market-closed .closed-overlay{ display:flex; }

    /* ===== News card + marquee ===== */
    .newsCard{ margin-top: 14px; }
    .newsList{
      display:block;
      margin-top: 10px;
    }

    .ticker{
      position: relative;
      overflow: hidden;
      border-radius: 16px;
      background: rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.06);
      padding: 12px 0;
    }

    .marquee{
      display:flex;
      width: 100%;
      overflow:hidden;
      user-select:none;
    }
    .marquee-group{
      display:flex;
      gap: 14px;
      padding-left: 14px;
      align-items:center;
      white-space: nowrap;
      animation: scroll 42s linear infinite;
    }
    /* second group will follow the first for seamless loop */
    #g2{ animation-delay: -21s; }

    @keyframes scroll{
      from{ transform: translateX(0); }
      to{ transform: translateX(-100%); }
    }

    .item{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.06);
      color:#eaeaea;
      font-size: 13px;
      letter-spacing:.02em;
    }
    .item .badge{
      padding: 6px 10px;
      font-size: 11px;
      letter-spacing:.20em;
      text-transform: uppercase;
      border-radius: 999px;
    }
    .news-link{
      color:#f1f1f1;
      text-decoration:none;
    }
    .news-link:hover{ text-decoration: underline; }

    /* ===== Footer note ===== */
    .signature{
      margin-top: 14px;
      text-align:center;
      color: var(--muted2);
      font-size: 12px;
      letter-spacing: .14em;
      text-transform: uppercase;
    }
    .signature b{ color:#eaeaea; font-weight:600; letter-spacing:.18em; }

    /* Mobile performance: reduce heavy blur on low-end devices */
    @media (max-width: 420px){
      .card{ backdrop-filter: blur(8px); -webkit-backdrop-filter: blur(8px); }
      .marquee-group{ animation-duration: 48s; }
    }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- FULLSCREEN (existing JS uses kioskBtn/kioskLabel) -->
    <div class="topbar">
      <button class="btn" id="kioskBtn" type="button">
        <span class="dot"></span>
        <div>
          <small>FULL SCREEN</small>
          <span class="txt" id="kioskLabel">Fullscreen</span>
        </div>
      </button>
    </div>

    <header>
      <div class="brand">
        <div class="logoBox">
          <img src="logo.png" alt="Logo">
        </div>
        <div class="titles">
          <h1>SHALUQ JEWELLERS</h1>
          <p>Live Gold &amp; Silver Prices</p>
        </div>
      </div>

      <!-- Market pill (existing JS updates these IDs) -->
      <div class="marketbar">
        <div class="pill">
          <span class="dotStatus" id="statusDot"></span>
          <span class="label" id="marketTop">Market</span>
          <span class="sep">•</span>
          <span class="val" id="marketETA">--</span>
          <span class="sep">•</span>
          <span class="val" id="clock">--:-- UAE • --:-- USA • --:-- LON</span>
        </div>
      </div>
    </header>

    <div class="divider"></div>

    <!-- RATES -->
    <div class="grid">
      <section class="card">
        <div class="cardInner">
          <div class="cardHead">
            <div class="cardTitle">GOLD (XAUUSD)</div>
            <div class="badge">Status <b id="goldStatus">Market</b></div>
          </div>

          <div class="tv-box">
            <div class="closed-overlay">Market Closed</div>
            <div class="tv-inner">
              <!-- TradingView widget injected here by your existing JS -->
              <div id="gold"></div>
            </div>
          </div>
        </div>
      </section>

      <section class="card">
        <div class="cardInner">
          <div class="cardHead">
            <div class="cardTitle">SILVER (XAGUSD)</div>
            <div class="badge">Status <b id="silverStatus">Market</b></div>
          </div>

          <div class="tv-box">
            <div class="closed-overlay">Market Closed</div>
            <div class="tv-inner">
              <!-- TradingView widget injected here by your existing JS -->
              <div id="silver"></div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- NEWS -->
    <section class="card newsCard">
      <div class="cardInner">
        <div class="cardHead">
          <div class="cardTitle">NEWS</div>
          <div class="badge"><b>Loading Gold Headlines...</b></div>
        </div>

        <div class="ticker">
          <div class="marquee">
            <!-- existing JS populates news inside these groups -->
            <div class="marquee-group" id="g1">
              <div class="item"><span class="badge">NEWS</span> Loading Gold Headlines...</div>

              <div class="item"><span class="badge">DUBAI</span> Office M02, Saeed Mohammed Building, Deira Gold Souk Dubai</div>
              <div class="item"><span class="badge">FOR DUBAI CALL</span> +971 54 786 9940</div>
              <div class="item"><span class="badge">VISIT</span> www.shaluqjewellers.com</div>
              <div class="item"><span class="badge">FUJAIRAH</span> (Retail Store) Hamad Bin Abdulla Rd, Merashid, Opposite ADCB Bank Fujairah UAE</div>
              <div class="item"><span class="badge">FOR FUJAIRAH CALL</span> +971 92 439 539</div>
              <div class="item"><span class="badge">SHALUQ JEWELLERS</span> Where Luxury Meets Affection</div>
            </div>

            <div class="marquee-group" id="g2" aria-hidden="true"></div>
          </div>
        </div>

        <div class="signature"><b>SHALUQ JEWELLERS</b> — Where Luxury Meets Affection</div>
      </div>
    </section>

  </div>

  <div id="kioskHint" style="display:none;"></div>

  <script>
/* ===== TradingView Symbol Info ===== */
function addTV(symbol,id){
  const s=document.createElement("script");
  s.src="https://s3.tradingview.com/external-embedding/embed-widget-symbol-info.js";
  s.async=true;
  s.innerHTML=JSON.stringify({symbol:symbol,colorTheme:"dark",isTransparent:true,locale:"en"});
  document.getElementById(id).appendChild(s);
}
addTV("OANDA:XAUUSD","gold");
addTV("OANDA:XAGUSD","silver");

/* ===== Dubai time helper (UAE = UTC+4) ===== */
function getDubaiDate(){
  const now = new Date();
  const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
  return new Date(utc + (4 * 60 * 60000));
}

/* ===== Clock (Dubai + USA(New York) + London) ===== */
function tickClock(){
  const now = new Date();

  // UAE (Dubai)
  const d = getDubaiDate();
  const hh = String(d.getHours()).padStart(2,"0");
  const mm = String(d.getMinutes()).padStart(2,"0");

  // USA (New York)
  const usa = new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:false,timeZone:"America/New_York"}).format(now);

  // London
  const lon = new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",hour12:false,timeZone:"Europe/London"}).format(now);

  document.getElementById("clock").textContent = `${hh}:${mm} UAE • ${usa} USA • ${lon} LON`;
}
tickClock();
setInterval(tickClock, 15000);

/* ===== Market Hours (Simple 24/5 FX style) ===== */
function isMarketOpen(dubaiDate){
  // Convert Dubai time to UTC then derive New York weekday
  const utcMs = dubaiDate.getTime() - (4 * 60 * 60000);
  const utc = new Date(utcMs);

  // Use New York weekday for weekend close
  const dowNY = new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"America/New_York"}).format(utc);
  return !["Sat","Sun"].includes(dowNY);
}

function getNextOpen(dubaiDate){
  // Next weekday (Mon) at 01:00 Dubai time (simple safe default)
  const d = new Date(dubaiDate);
  while(true){
    d.setMinutes(0,0,0);
    d.setHours(1);
    d.setDate(d.getDate()+1);
    if(isMarketOpen(d)) return d;
  }
}

function getNextClose(dubaiDate){
  // Close at Sat 01:00 Dubai time (simple safe default)
  const d = new Date(dubaiDate);
  // find next Saturday
  while(true){
    d.setMinutes(0,0,0);
    d.setHours(1);
    const dowNY = new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"America/New_York"}).format(
      new Date(d.getTime() - (4 * 60 * 60000))
    );
    if(dowNY === "Sat") return d;
    d.setDate(d.getDate()+1);
  }
}

let marketTickTimer = null;
function updateMarketBar(){
  const d = getDubaiDate();
  const open = isMarketOpen(d);

  const top = document.getElementById("marketTop");
  const eta = document.getElementById("marketETA");
  const dot = document.getElementById("statusDot");

  // clone ticker group for seamless loop
  const g1 = document.getElementById("g1");
  const g2 = document.getElementById("g2");
  if(g2 && g1 && g2.innerHTML.trim() === "") g2.innerHTML = g1.innerHTML;

  if(marketTickTimer) clearInterval(marketTickTimer);

  if(open){
    const closeAt = getNextClose(d);

    top.textContent = "Market";
    dot.style.background = "var(--open)";
    dot.style.boxShadow = "0 0 12px var(--open)";
    document.body.classList.remove("market-closed");

    function tick(){
      const nowDubai = getDubaiDate();
      let diff = Math.max(0, Math.floor((closeAt.getTime() - nowDubai.getTime()) / 1000));
      const hrs = Math.floor(diff / 3600); diff %= 3600;
      const mins = Math.floor(diff / 60);
      const secs = diff % 60;
      eta.textContent = `Open • Closes in ${hrs}h ${mins}m ${String(secs).padStart(2,"0")}s`;
      // cosmetic
      const gs = document.getElementById("goldStatus"); if(gs) gs.textContent = "Open";
      const ss = document.getElementById("silverStatus"); if(ss) ss.textContent = "Open";
    }
    tick();
    marketTickTimer = setInterval(tick, 1000);

  } else {
    const openAt = getNextOpen(d);

    top.textContent = "Market Closed";
    dot.style.background = "var(--closed)";
    dot.style.boxShadow = "0 0 12px var(--closed)";
    document.body.classList.add("market-closed");

    function tick(){
      const nowDubai = getDubaiDate();
      let diff = Math.max(0, Math.floor((openAt.getTime() - nowDubai.getTime()) / 1000));

      const days = Math.floor(diff / 86400); diff %= 86400;
      const hrs = Math.floor(diff / 3600); diff %= 3600;
      const mins = Math.floor(diff / 60);
      const secs = diff % 60;

      eta.textContent = days > 0
        ? `Opens in ${days}d ${hrs}h ${mins}m ${String(secs).padStart(2,"0")}s`
        : `Opens in ${hrs}h ${mins}m ${String(secs).padStart(2,"0")}s`;

      const gs = document.getElementById("goldStatus"); if(gs) gs.textContent = "Closed";
      const ss = document.getElementById("silverStatus"); if(ss) ss.textContent = "Closed";
    }
    tick();
    marketTickTimer = setInterval(tick, 1000);
  }
}
updateMarketBar();
setInterval(updateMarketBar, 60000);

/* ===== News Headlines ===== */
function stripHtml(html){ return (html||"").replace(/<[^>]*>/g,"").trim(); }

function relTimeFromNow(d){
  const now = getDubaiDate();
  const diff = Math.floor((now.getTime() - d.getTime())/1000);
  if(diff < 60) return "Just now";
  const mins = Math.floor(diff/60);
  if(mins < 60) return `${mins}m ago`;
  const hrs = Math.floor(mins/60);
  if(hrs < 24) return `${hrs}h ago`;
  const days = Math.floor(hrs/24);
  return `${days}d ago`;
}
function formatDubaiTime(d){
  const utcMs = d.getTime();
  const dubai = new Date(utcMs + (4 * 60 * 60000));
  const hh = String(dubai.getHours()).padStart(2,"0");
  const mm = String(dubai.getMinutes()).padStart(2,"0");
  return `${hh}:${mm} UAE`;
}

async function fetchNews(){
  try{
    const g1 = document.getElementById("g1");
    if(!g1) return;

    const rssUrl = "https://www.kitco.com/rss/news/?category=commodities";
    const api = "https://api.rss2json.com/v1/api.json?rss_url=" + encodeURIComponent(rssUrl);

    const res = await fetch(api, { cache: "no-store" });
    const data = await res.json();

    const oldNews = g1.querySelectorAll("[data-news='1']");
    oldNews.forEach(n => n.remove());

    const first = g1.querySelector(".item");
    if(first && first.textContent.includes("Loading Gold Headlines")) first.remove();

    const items = (data.items || []).slice(0, 6);

    if(items.length === 0){
      g1.insertAdjacentHTML("afterbegin",
        `<div class="item" data-news="1"><span class="badge">NEWS</span> No headlines right now</div>`
      );
    } else {
      const html = items.map(x => {
        const title = stripHtml(x.title);
        const link = x.link || "#";
        const pub = x.pubDate ? new Date(x.pubDate) : null;
        const timeLabel = pub && !isNaN(pub.getTime()) ? `${relTimeFromNow(pub)} • ${formatDubaiTime(pub)}` : "Latest";

        return `
          <div class="item" data-news="1">
            <span class="badge">NEWS</span>
            <a class="news-link" href="${link}" target="_blank" rel="noopener noreferrer">${title}</a>
            <span style="opacity:.7; letter-spacing:.10em; font-size:11px; text-transform:uppercase;">${timeLabel}</span>
          </div>
        `;
      }).join("");

      g1.insertAdjacentHTML("afterbegin", html);
    }

    // refresh g2 for seamless loop
    const g2 = document.getElementById("g2");
    if(g2) g2.innerHTML = g1.innerHTML;

  } catch(e){
    // keep silent, UI still looks premium even if headlines fail
  }
}
fetchNews();
setInterval(fetchNews, 1000 * 60 * 10);

/* ===== Fullscreen (kiosk) ===== */
const kioskBtn = document.getElementById("kioskBtn");
kioskBtn?.addEventListener("click", async () => {
  try{
    if(!document.fullscreenElement) await document.documentElement.requestFullscreen();
    else await document.exitFullscreen();
  }catch(e){}
});
  </script>
</body>
</html>
